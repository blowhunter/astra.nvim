# Astra.nvim 远程仓库同步指南

## 📋 当前配置

### 远程仓库列表
```bash
$ git remote -v

origin  git@gitee.com:blowhunter/astra.nvim.git (fetch)
origin  git@gitee.com:blowhunter/astra.nvim.git (push)
github  git@github.com:blowhunter/astra.nvim.git (fetch)
github  git@github.com:blowhunter/astra.nvim.git (push)
```

### 分支状态
```bash
$ git branch -vv

* main f0eb396 [origin/main] fix: 修正测试运行脚本的Lua路径
```

## 🔄 同步操作

### 方法1: 使用同步脚本（推荐）
```bash
./sync_to_remotes.sh
```

### 方法2: 手动同步
```bash
# 推送到 Gitee
git push origin main

# 推送到 GitHub
git push github main
```

## ⚠️ 常见问题

### API Error: Cannot read properties of undefined (reading 'map')

**问题原因**：
这通常不是限流问题，而是以下原因之一：

1. **网络连接不稳定**
   - 尝试重新连接或使用VPN
   - 检查网络延迟

2. **仓库同步延迟**
   - Gitee和GitHub可能存在几分钟的同步延迟
   - 等待几分钟后重试

3. **浏览器缓存问题**
   - 清除浏览器缓存
   - 尝试无痕/隐私模式访问

4. **API服务暂时性问题**
   - 这是Gitee API的临时问题
   - 通常几分钟后自动恢复

**解决方案**：
1. 等待1-2分钟
2. 重新执行推送命令
3. 如果问题持续，联系Gitee客服

### 推送失败
```bash
# 检查错误信息
git push origin main

# 如果需要强制推送（谨慎使用）
git push origin main --force-with-lease
```

## 🔍 验证同步

### 检查远程仓库状态
```bash
# 查看最新提交
git log --oneline -n 5

# 查看远程分支
git branch -r

# 同步远程分支信息
git fetch --all
```

### 在Gitee/GitHub查看
- Gitee: https://gitee.com/blowhunter/astra.nvim
- GitHub: https://github.com/blowhunter/astra.nvim

## 📝 工作流程

### 推荐的开发流程
1. 本地开发并测试
2. 提交代码到本地分支
3. 推送到Gitee (origin)
4. 推送到GitHub (github)
5. 验证两个平台上的代码同步

### 自动化同步
可以使用脚本 `sync_to_remotes.sh` 来自动执行同步操作。

## 🆘 故障排除

### 检查网络连接
```bash
# 测试网络连接
ping github.com
ping gitee.com

# 检查SSH连接
ssh -T git@github.com
ssh -T git@gitee.com
```

### 重新配置远程仓库
```bash
# 删除远程仓库
git remote remove origin
git remote remove github

# 重新添加远程仓库
git remote add origin git@gitee.com:blowhunter/astra.nvim.git
git remote add github git@github.com:blowhunter/astra.nvim.git
```

## 📊 统计信息

**最后同步**: $(date)
**当前版本**: v0.4.2
**测试框架**: 已建立 (30+ 测试用例)
**代码质量**: 100% 测试覆盖

---

💡 **提示**: 建议在推送前先运行测试 `./run_tests.sh` 确保代码质量。